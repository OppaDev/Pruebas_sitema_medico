ù
oC:\Users\OppaDev\Desktop\Pruebas de Software\Segundo parcial\SistemaCitasMedicas\SistemaCitasMedicas\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddDbContext 
< 
AppDBContext *
>* +
(+ ,
options, 3
=>4 6
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$strC V
)V W
)W X
)X Y
;Y Z
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseAuthorization 
( 
) 
; 
app!! 
.!! 
MapControllers!! 
(!! 
)!! 
;!! 
await## 
app## 	
.##	 

RunAsync##
 
(## 
)## 
;## »P
èC:\Users\OppaDev\Desktop\Pruebas de Software\Segundo parcial\SistemaCitasMedicas\SistemaCitasMedicas\Migrations\20250116135841_InitialCreate.cs
	namespace 	
SistemaCitasMedicas
 
. 

Migrations (
{ 
public

 

partial

 
class

 
InitialCreate

 &
:

' (
	Migration

) 2
{ 
public 
static 
class 
	Constants %
{ 	
public 
const 
string 
SqlServerIdentity  1
=2 3
$str4 H
;H I
public 
const 
string 
NVarCharMax  +
=, -
$str. =
;= >
} 	
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
IDCita 
= 
table "
." #
Column# )
<) *
int* -
>- .
(. /
type/ 3
:3 4
$str5 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
	Constants$ -
.- .
SqlServerIdentity. ?
,? @
$strA G
)G H
,H I
Fecha 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
	Constants7 @
.@ A
NVarCharMaxA L
,L M
nullableN V
:V W
trueX \
)\ ]
,] ^

IDPaciente 
=  
table! &
.& '
Column' -
<- .
int. 1
>1 2
(2 3
type3 7
:7 8
$str9 >
,> ?
nullable@ H
:H I
falseJ O
)O P
,P Q
IDDoctor 
= 
table $
.$ %
Column% +
<+ ,
int, /
>/ 0
(0 1
type1 5
:5 6
$str7 <
,< =
nullable> F
:F G
falseH M
)M N
} 
, 
constraints   
:   
table   "
=>  # %
{!! 
table"" 
."" 

PrimaryKey"" $
(""$ %
$str""% /
,""/ 0
x""1 2
=>""3 5
x""6 7
.""7 8
IDCita""8 >
)""> ?
;""? @
}## 
)## 
;## 
migrationBuilder%% 
.%% 
CreateTable%% (
(%%( )
name&& 
:&& 
$str&&  
,&&  !
columns'' 
:'' 
table'' 
=>'' !
new''" %
{(( 
IDDoctor)) 
=)) 
table)) $
.))$ %
Column))% +
<))+ ,
int)), /
>))/ 0
())0 1
type))1 5
:))5 6
$str))7 <
,))< =
nullable))> F
:))F G
false))H M
)))M N
.** 

Annotation** #
(**# $
	Constants**$ -
.**- .
SqlServerIdentity**. ?
,**? @
$str**A G
)**G H
,**H I
Nombre++ 
=++ 
table++ "
.++" #
Column++# )
<++) *
string++* 0
>++0 1
(++1 2
type++2 6
:++6 7
	Constants++8 A
.++A B
NVarCharMax++B M
,++M N
nullable++O W
:++W X
true++Y ]
)++] ^
,++^ _
Apellido,, 
=,, 
table,, $
.,,$ %
Column,,% +
<,,+ ,
string,,, 2
>,,2 3
(,,3 4
type,,4 8
:,,8 9
	Constants,,: C
.,,C D
NVarCharMax,,D O
,,,O P
nullable,,Q Y
:,,Y Z
true,,[ _
),,_ `
,,,` a
Especialidad--  
=--! "
table--# (
.--( )
Column--) /
<--/ 0
string--0 6
>--6 7
(--7 8
type--8 <
:--< =
	Constants--> G
.--G H
NVarCharMax--H S
,--S T
nullable--U ]
:--] ^
true--_ c
)--c d
}.. 
,.. 
constraints// 
:// 
table// "
=>//# %
{00 
table11 
.11 

PrimaryKey11 $
(11$ %
$str11% 2
,112 3
x114 5
=>116 8
x119 :
.11: ;
IDDoctor11; C
)11C D
;11D E
}22 
)22 
;22 
migrationBuilder44 
.44 
CreateTable44 (
(44( )
name55 
:55 
$str55 !
,55! "
columns66 
:66 
table66 
=>66 !
new66" %
{77 

IDPaciente88 
=88  
table88! &
.88& '
Column88' -
<88- .
int88. 1
>881 2
(882 3
type883 7
:887 8
$str889 >
,88> ?
nullable88@ H
:88H I
false88J O
)88O P
.99 

Annotation99 #
(99# $
	Constants99$ -
.99- .
SqlServerIdentity99. ?
,99? @
$str99A G
)99G H
,99H I
Nombre:: 
=:: 
table:: "
.::" #
Column::# )
<::) *
string::* 0
>::0 1
(::1 2
type::2 6
:::6 7
	Constants::8 A
.::A B
NVarCharMax::B M
,::M N
nullable::O W
:::W X
true::Y ]
)::] ^
,::^ _
Apellido;; 
=;; 
table;; $
.;;$ %
Column;;% +
<;;+ ,
string;;, 2
>;;2 3
(;;3 4
type;;4 8
:;;8 9
	Constants;;: C
.;;C D
NVarCharMax;;D O
,;;O P
nullable;;Q Y
:;;Y Z
true;;[ _
);;_ `
,;;` a
FechaNacimiento<< #
=<<$ %
table<<& +
.<<+ ,
Column<<, 2
<<<2 3
string<<3 9
><<9 :
(<<: ;
type<<; ?
:<<? @
	Constants<<A J
.<<J K
NVarCharMax<<K V
,<<V W
nullable<<X `
:<<` a
true<<b f
)<<f g
}== 
,== 
constraints>> 
:>> 
table>> "
=>>># %
{?? 
table@@ 
.@@ 

PrimaryKey@@ $
(@@$ %
$str@@% 3
,@@3 4
x@@5 6
=>@@7 9
x@@: ;
.@@; <

IDPaciente@@< F
)@@F G
;@@G H
}AA 
)AA 
;AA 
migrationBuilderCC 
.CC 
CreateTableCC (
(CC( )
nameDD 
:DD 
$strDD &
,DD& '
columnsEE 
:EE 
tableEE 
=>EE !
newEE" %
{FF 
IDProcedimientoGG #
=GG$ %
tableGG& +
.GG+ ,
ColumnGG, 2
<GG2 3
intGG3 6
>GG6 7
(GG7 8
typeGG8 <
:GG< =
$strGG> C
,GGC D
nullableGGE M
:GGM N
falseGGO T
)GGT U
.HH 

AnnotationHH #
(HH# $
	ConstantsHH$ -
.HH- .
SqlServerIdentityHH. ?
,HH? @
$strHHA G
)HHG H
,HHH I
DescripcionII 
=II  !
tableII" '
.II' (
ColumnII( .
<II. /
stringII/ 5
>II5 6
(II6 7
typeII7 ;
:II; <
	ConstantsII= F
.IIF G
NVarCharMaxIIG R
,IIR S
nullableIIT \
:II\ ]
trueII^ b
)IIb c
,IIc d
CostoJJ 
=JJ 
tableJJ !
.JJ! "
ColumnJJ" (
<JJ( )
decimalJJ) 0
>JJ0 1
(JJ1 2
typeJJ2 6
:JJ6 7
$strJJ8 G
,JJG H
nullableJJI Q
:JJQ R
falseJJS X
)JJX Y
,JJY Z
IDCitaKK 
=KK 
tableKK "
.KK" #
ColumnKK# )
<KK) *
intKK* -
>KK- .
(KK. /
typeKK/ 3
:KK3 4
$strKK5 :
,KK: ;
nullableKK< D
:KKD E
falseKKF K
)KKK L
}LL 
,LL 
constraintsMM 
:MM 
tableMM "
=>MM# %
{NN 
tableOO 
.OO 

PrimaryKeyOO $
(OO$ %
$strOO% 8
,OO8 9
xOO: ;
=>OO< >
xOO? @
.OO@ A
IDProcedimientoOOA P
)OOP Q
;OOQ R
}PP 
)PP 
;PP 
}QQ 	
	protectedTT 
overrideTT 
voidTT 
DownTT  $
(TT$ %
MigrationBuilderTT% 5
migrationBuilderTT6 F
)TTF G
{UU 	
migrationBuilderVV 
.VV 
	DropTableVV &
(VV& '
nameWW 
:WW 
$strWW 
)WW 
;WW 
migrationBuilderYY 
.YY 
	DropTableYY &
(YY& '
nameZZ 
:ZZ 
$strZZ  
)ZZ  !
;ZZ! "
migrationBuilder\\ 
.\\ 
	DropTable\\ &
(\\& '
name]] 
:]] 
$str]] !
)]]! "
;]]" #
migrationBuilder__ 
.__ 
	DropTable__ &
(__& '
name`` 
:`` 
$str`` &
)``& '
;``' (
}aa 	
}bb 
}cc ¡2
åC:\Users\OppaDev\Desktop\Pruebas de Software\Segundo parcial\SistemaCitasMedicas\SistemaCitasMedicas\Controllers\ProcedimientosController.cs
	namespace 	
SistemaCitasMedicas
 
. 
Controllers )
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class $
ProcedimientosController )
:* +
ControllerBase, :
{		 
private

 
readonly

 
AppDBContext

 %

_dbContext

& 0
;

0 1
public $
ProcedimientosController '
(' (
AppDBContext( 4
	dbContext5 >
)> ?
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetProcedimientos) :
(: ;
); <
{ 	
return 
Ok 
( 
await 

_dbContext &
.& '
Procedimientos' 5
.5 6
ToListAsync6 A
(A B
)B C
)C D
;D E
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
CreateProcedimiento) <
(< =
Procedimientos= K
procedimientoL Y
)Y Z
{ 	
if 
( 
procedimiento 
. 
Costo #
<$ %
$num& '
)' (
{ 
return 

BadRequest !
(! "
$str" ?
)? @
;@ A
} 
var 

citaExiste 
= 
await "

_dbContext# -
.- .
Citas. 3
.3 4
AnyAsync4 <
(< =
c= >
=>? A
cB C
.C D
IDCitaD J
==K M
procedimientoN [
.[ \
IDCita\ b
)b c
;c d
if 
( 
! 

citaExiste 
) 
{ 
return   

BadRequest   !
(  ! "
$str  " 5
)  5 6
;  6 7
}!! 

_dbContext"" 
."" 
Procedimientos"" %
.""% &
Add""& )
("") *
procedimiento""* 7
)""7 8
;""8 9
await## 

_dbContext## 
.## 
SaveChangesAsync## -
(##- .
)##. /
;##/ 0
return$$ 
Ok$$ 
($$ 
procedimiento$$ #
)$$# $
;$$$ %
}%% 	
['' 	
HttpPut''	 
]'' 
public(( 
async(( 
Task(( 
<(( 
IActionResult(( '
>((' (
UpdateProcedimiento(() <
(((< =
Procedimientos((= K
procedimiento((L Y
)((Y Z
{)) 	
if** 
(** 
procedimiento** 
.** 
Costo** #
<**$ %
$num**& '
)**' (
{++ 
return,, 

BadRequest,, !
(,,! "
$str,," ?
),,? @
;,,@ A
}-- 
var.. 

citaExiste.. 
=.. 
await.. "

_dbContext..# -
...- .
Citas... 3
...3 4
AnyAsync..4 <
(..< =
c..= >
=>..? A
c..B C
...C D
IDCita..D J
==..K M
procedimiento..N [
...[ \
IDCita..\ b
)..b c
;..c d
if// 
(// 
!// 

citaExiste// 
)// 
{00 
return11 

BadRequest11 !
(11! "
$str11" 5
)115 6
;116 7
}22 

_dbContext33 
.33 
Entry33 
(33 
procedimiento33 *
)33* +
.33+ ,
State33, 1
=332 3
EntityState334 ?
.33? @
Modified33@ H
;33H I
await44 

_dbContext44 
.44 
SaveChangesAsync44 -
(44- .
)44. /
;44/ 0
return55 
Ok55 
(55 
procedimiento55 #
)55# $
;55$ %
}66 	
[88 	

HttpDelete88	 
(88 
$str88 
)88 
]88 
public99 
async99 
Task99 
<99 
IActionResult99 '
>99' (
DeleteProcedimiento99) <
(99< =
int99= @
id99A C
)99C D
{:: 	
var;; 
procedimiento;; 
=;; 
await;;  %

_dbContext;;& 0
.;;0 1
Procedimientos;;1 ?
.;;? @
	FindAsync;;@ I
(;;I J
id;;J L
);;L M
;;;M N
var<< 
cita<< 
=<< 
await<< 

_dbContext<< '
.<<' (
Citas<<( -
.<<- .
FirstOrDefaultAsync<<. A
(<<A B
x<<B C
=><<D F
x<<G H
.<<H I
IDCita<<I O
==<<P R
id<<S U
)<<U V
;<<V W
if== 
(== 
cita== 
!=== 
null== 
)== 
{>> 
return?? 

BadRequest?? !
(??! "
$str??" `
)??` a
;??a b
}@@ 
ifAA 
(AA 
procedimientoAA 
==AA  
nullAA! %
)AA% &
{BB 
returnCC 

BadRequestCC !
(CC! "
$strCC" -
)CC- .
;CC. /
}DD 

_dbContextEE 
.EE 
ProcedimientosEE %
.EE% &
RemoveEE& ,
(EE, -
procedimientoEE- :
)EE: ;
;EE; <
awaitFF 

_dbContextFF 
.FF 
SaveChangesAsyncFF -
(FF- .
)FF. /
;FF/ 0
returnGG 
OkGG 
(GG 
)GG 
;GG 
}HH 	
}II 
}JJ Ç(
áC:\Users\OppaDev\Desktop\Pruebas de Software\Segundo parcial\SistemaCitasMedicas\SistemaCitasMedicas\Controllers\PacientesController.cs
	namespace 	
SistemaCitasMedicas
 
. 
Controllers )
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
PacientesController $
:% &
ControllerBase' 5
{		 
private

 
readonly

 
AppDBContext

 %

_dbContext

& 0
;

0 1
public 
PacientesController "
(" #
AppDBContext# /
	dbContext0 9
)9 :
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetPacientes) 5
(5 6
)6 7
{ 	
return 
Ok 
( 
await 

_dbContext &
.& '
	Pacientes' 0
.0 1
ToListAsync1 <
(< =
)= >
)> ?
;? @
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
CreatePaciente) 7
(7 8
	Pacientes8 A
pacienteB J
)J K
{ 	
if 
( 
string 
. 
IsNullOrWhiteSpace )
() *
paciente* 2
.2 3
Nombre3 9
)9 :
||; =
string 
. 
IsNullOrWhiteSpace )
() *
paciente* 2
.2 3
Apellido3 ;
); <
)< =
{ 
return 

BadRequest !
(! "
$str" D
)D E
;E F
} 

_dbContext!! 
.!! 
	Pacientes!!  
.!!  !
Add!!! $
(!!$ %
paciente!!% -
)!!- .
;!!. /
await"" 

_dbContext"" 
."" 
SaveChangesAsync"" -
(""- .
)"". /
;""/ 0
return## 
Ok## 
(## 
paciente## 
)## 
;##  
}$$ 	
['' 	
HttpPut''	 
]'' 
public(( 
async(( 
Task(( 
<(( 
IActionResult(( '
>((' (
UpdatePaciente(() 7
(((7 8
	Pacientes((8 A
paciente((B J
)((J K
{)) 	

_dbContext** 
.** 
Entry** 
(** 
paciente** %
)**% &
.**& '
State**' ,
=**- .
EntityState**/ :
.**: ;
Modified**; C
;**C D
await++ 

_dbContext++ 
.++ 
SaveChangesAsync++ -
(++- .
)++. /
;++/ 0
return,, 
Ok,, 
(,, 
paciente,, 
),, 
;,,  
}-- 	
[// 	

HttpDelete//	 
(// 
$str// 
)// 
]// 
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
DeletePaciente00) 7
(007 8
int008 ;
id00< >
)00> ?
{11 	
var22 
paciente22 
=22 
await22  

_dbContext22! +
.22+ ,
	Pacientes22, 5
.225 6
	FindAsync226 ?
(22? @
id22@ B
)22B C
;22C D
var33 
cita33 
=33 
await33 

_dbContext33 '
.33' (
Citas33( -
.33- .
FirstOrDefaultAsync33. A
(33A B
x33B C
=>33D F
x33G H
.33H I

IDPaciente33I S
==33T V
id33W Y
)33Y Z
;33Z [
if44 
(44 
cita44 
!=44 
null44 
)44 
{55 
return66 

BadRequest66 !
(66! "
$str66" [
)66[ \
;66\ ]
}77 
if88 
(88 
paciente88 
==88 
null88  
)88  !
{99 
return:: 

BadRequest:: !
(::! "
$str::" -
)::- .
;::. /
};; 

_dbContext<< 
.<< 
	Pacientes<<  
.<<  !
Remove<<! '
(<<' (
paciente<<( 0
)<<0 1
;<<1 2
await== 

_dbContext== 
.== 
SaveChangesAsync== -
(==- .
)==. /
;==/ 0
return>> 
Ok>> 
(>> 
)>> 
;>> 
}?? 	
}@@ 
}AA ú)
ÜC:\Users\OppaDev\Desktop\Pruebas de Software\Segundo parcial\SistemaCitasMedicas\SistemaCitasMedicas\Controllers\DoctoresController.cs
	namespace 	
SistemaCitasMedicas
 
. 
Controllers )
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
DoctoresController #
:$ %
ControllerBase& 4
{		 
private

 
readonly

 
AppDBContext

 %

_dbContext

& 0
;

0 1
public 
DoctoresController !
(! "
AppDBContext" .
	dbContext/ 8
)8 9
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetDoctores) 4
(4 5
)5 6
{ 	
return 
Ok 
( 
await 

_dbContext &
.& '
Doctores' /
./ 0
ToListAsync0 ;
(; <
)< =
)= >
;> ?
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
CreateDoctor) 5
(5 6
Doctores6 >
doctor? E
)E F
{ 	
if 
( 
string 
. 
IsNullOrWhiteSpace )
() *
doctor* 0
.0 1
Nombre1 7
)7 8
||9 ;
string 
. 
IsNullOrWhiteSpace )
() *
doctor* 0
.0 1
Apellido1 9
)9 :
||; =
string 
. 
IsNullOrWhiteSpace )
() *
doctor* 0
.0 1
Especialidad1 =
)= >
)> ?
{ 
return 

BadRequest !
(! "
$str" R
)R S
;S T
} 

_dbContext   
.   
Doctores   
.    
Add    #
(  # $
doctor  $ *
)  * +
;  + ,
await!! 

_dbContext!! 
.!! 
SaveChangesAsync!! -
(!!- .
)!!. /
;!!/ 0
return"" 
Ok"" 
("" 
doctor"" 
)"" 
;"" 
}## 	
[%% 	
HttpPut%%	 
]%% 
public&& 
async&& 
Task&& 
<&& 
IActionResult&& '
>&&' (
UpdateDoctor&&) 5
(&&5 6
Doctores&&6 >
doctor&&? E
)&&E F
{'' 	

_dbContext(( 
.(( 
Entry(( 
((( 
doctor(( #
)((# $
.(($ %
State((% *
=((+ ,
EntityState((- 8
.((8 9
Modified((9 A
;((A B
await)) 

_dbContext)) 
.)) 
SaveChangesAsync)) -
())- .
))). /
;))/ 0
return** 
Ok** 
(** 
doctor** 
)** 
;** 
}++ 	
[-- 	

HttpDelete--	 
(-- 
$str-- 
)-- 
]-- 
public.. 
async.. 
Task.. 
<.. 
IActionResult.. '
>..' (
DeleteDoctor..) 5
(..5 6
int..6 9
id..: <
)..< =
{// 	
var00 
doctor00 
=00 
await00 

_dbContext00 )
.00) *
Doctores00* 2
.002 3
	FindAsync003 <
(00< =
id00= ?
)00? @
;00@ A
var11 
cita11 
=11 
await11 

_dbContext11 '
.11' (
Citas11( -
.11- .
FirstOrDefaultAsync11. A
(11A B
x11B C
=>11D F
x11G H
.11H I
IDDoctor11I Q
==11R T
id11U W
)11W X
;11X Y
if22 
(22 
cita22 
!=22 
null22 
)22 
{33 
return44 

BadRequest44 !
(44! "
$str44" Y
)44Y Z
;44Z [
}55 
if66 
(66 
doctor66 
==66 
null66 
)66 
{77 
return88 

BadRequest88 !
(88! "
$str88" -
)88- .
;88. /
}99 

_dbContext:: 
.:: 
Doctores:: 
.::  
Remove::  &
(::& '
doctor::' -
)::- .
;::. /
await;; 

_dbContext;; 
.;; 
SaveChangesAsync;; -
(;;- .
);;. /
;;;/ 0
return<< 
Ok<< 
(<< 
doctor<< 
)<< 
;<< 
}== 	
}>> 
}?? ≠6
ÉC:\Users\OppaDev\Desktop\Pruebas de Software\Segundo parcial\SistemaCitasMedicas\SistemaCitasMedicas\Controllers\CitasController.cs
	namespace 	
SistemaCitasMedicas
 
. 
Controllers )
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
CitasController  
:! "
ControllerBase# 1
{		 
private

 
readonly

 
AppDBContext

 %

_dbContext

& 0
;

0 1
public 
CitasController 
( 
AppDBContext +
	dbContext, 5
)5 6
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetCitas) 1
(1 2
)2 3
{ 	
return 
Ok 
( 
await 

_dbContext &
.& '
Citas' ,
., -
ToListAsync- 8
(8 9
)9 :
): ;
;; <
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (

CreateCita) 3
(3 4
Citas4 9
cita: >
)> ?
{ 	
if 
( 
cita 
. 
Fecha 
< 
DateTime %
.% &
Today& +
)+ ,
{ 
return 

BadRequest !
(! "
$str" 5
)5 6
;6 7
} 
var 
pacienteExiste 
=  
await! &

_dbContext' 1
.1 2
	Pacientes2 ;
.; <
AnyAsync< D
(D E
pE F
=>G I
pJ K
.K L

IDPacienteL V
==W Y
citaZ ^
.^ _

IDPaciente_ i
)i j
;j k
if 
( 
! 
pacienteExiste 
)  
{ 
return   

BadRequest   !
(  ! "
$str  " 9
)  9 :
;  : ;
}!! 
var"" 
doctorExiste"" 
="" 
await"" $

_dbContext""% /
.""/ 0
Doctores""0 8
.""8 9
AnyAsync""9 A
(""A B
d""B C
=>""D F
d""G H
.""H I
IDDoctor""I Q
==""R T
cita""U Y
.""Y Z
IDDoctor""Z b
)""b c
;""c d
if## 
(## 
!## 
doctorExiste## 
)## 
{$$ 
return%% 

BadRequest%% !
(%%! "
$str%%" 7
)%%7 8
;%%8 9
}&& 

_dbContext'' 
.'' 
Citas'' 
.'' 
Add''  
(''  !
cita''! %
)''% &
;''& '
await(( 

_dbContext(( 
.(( 
SaveChangesAsync(( -
(((- .
)((. /
;((/ 0
return)) 
Ok)) 
()) 
))) 
;)) 
}++ 	
[-- 	
HttpPut--	 
]-- 
public.. 
async.. 
Task.. 
<.. 
IActionResult.. '
>..' (

UpdateCita..) 3
(..3 4
Citas..4 9
cita..: >
)..> ?
{// 	
if00 
(00 
cita00 
.00 
Fecha00 
<00 
DateTime00 %
.00% &
Today00& +
)00+ ,
{11 
return22 

BadRequest22 !
(22! "
$str22" 5
)225 6
;226 7
}33 
var44 
pacienteExiste44 
=44  
await44! &

_dbContext44' 1
.441 2
	Pacientes442 ;
.44; <
AnyAsync44< D
(44D E
p44E F
=>44G I
p44J K
.44K L

IDPaciente44L V
==44W Y
cita44Z ^
.44^ _

IDPaciente44_ i
)44i j
;44j k
if55 
(55 
!55 
pacienteExiste55 
)55  
{66 
return77 

BadRequest77 !
(77! "
$str77" 9
)779 :
;77: ;
}88 
var99 
doctorExiste99 
=99 
await99 $

_dbContext99% /
.99/ 0
Doctores990 8
.998 9
AnyAsync999 A
(99A B
d99B C
=>99D F
d99G H
.99H I
IDDoctor99I Q
==99R T
cita99U Y
.99Y Z
IDDoctor99Z b
)99b c
;99c d
if:: 
(:: 
!:: 
doctorExiste:: 
):: 
{;; 
return<< 

BadRequest<< !
(<<! "
$str<<" 7
)<<7 8
;<<8 9
}== 

_dbContext>> 
.>> 
Entry>> 
(>> 
cita>> !
)>>! "
.>>" #
State>># (
=>>) *
EntityState>>+ 6
.>>6 7
Modified>>7 ?
;>>? @
await?? 

_dbContext?? 
.?? 
SaveChangesAsync?? -
(??- .
)??. /
;??/ 0
return@@ 
Ok@@ 
(@@ 
cita@@ 
)@@ 
;@@ 
}AA 	
[CC 	

HttpDeleteCC	 
(CC 
$strCC 
)CC 
]CC 
publicDD 
asyncDD 
TaskDD 
<DD 
IActionResultDD '
>DD' (

DeleteCitaDD) 3
(DD3 4
intDD4 7
idDD8 :
)DD: ;
{EE 	
varFF 
citaFF 
=FF 
awaitFF 

_dbContextFF '
.FF' (
CitasFF( -
.FF- .
	FindAsyncFF. 7
(FF7 8
idFF8 :
)FF: ;
;FF; <
ifGG 
(GG 
citaGG 
==GG 
nullGG 
)GG 
{HH 
returnII 

BadRequestII !
(II! "
$strII" -
)II- .
;II. /
}JJ 

_dbContextKK 
.KK 
CitasKK 
.KK 
RemoveKK #
(KK# $
citaKK$ (
)KK( )
;KK) *
awaitLL 

_dbContextLL 
.LL 
SaveChangesAsyncLL -
(LL- .
)LL. /
;LL/ 0
returnMM 
OkMM 
(MM 
)MM 
;MM 
}NN 	
}OO 
}PP ‘%
tC:\Users\OppaDev\Desktop\Pruebas de Software\Segundo parcial\SistemaCitasMedicas\SistemaCitasMedicas\AppDBContext.cs
	namespace 	
SistemaCitasMedicas
 
{ 
public 

class 
AppDBContext 
: 
	DbContext  )
{		 
public

 
AppDBContext

 
(

 
DbContextOptions

 ,
<

, -
AppDBContext

- 9
>

9 :
options

; B
)

B C
:

D E
base

F J
(

J K
options

K R
)

R S
{

T U
} 	
public 
DbSet 
< 
	Pacientes 
> 
	Pacientes  )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 
Doctores 
> 
Doctores '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
DbSet 
< 
Citas 
> 
Citas !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DbSet 
< 
Procedimientos #
># $
Procedimientos% 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
} 
public 

class 
	Pacientes 
{ 
[ 	
Key	 
] 
public 
required 
int 

IDPaciente &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
? 
Nombre 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
Apellido 
{  !
get" %
;% &
set' *
;* +
}, -
public 
DateTime 
? 
FechaNacimiento (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
} 
public 

class 
Doctores 
{   
[!! 	
Key!!	 
]!! 
public"" 
required"" 
int"" 
IDDoctor"" $
{""% &
get""' *
;""* +
set"", /
;""/ 0
}""1 2
public## 
string## 
?## 
Nombre## 
{## 
get##  #
;### $
set##% (
;##( )
}##* +
public$$ 
string$$ 
?$$ 
Apellido$$ 
{$$  !
get$$" %
;$$% &
set$$' *
;$$* +
}$$, -
public%% 
string%% 
?%% 
Especialidad%% #
{%%$ %
get%%& )
;%%) *
set%%+ .
;%%. /
}%%0 1
}&& 
public(( 

class(( 
Citas(( 
{)) 
[** 	
Key**	 
]** 
public++ 
required++ 
int++ 
IDCita++ "
{++# $
get++% (
;++( )
set++* -
;++- .
}++/ 0
public,, 
DateTime,, 
?,, 
Fecha,, 
{,,  
get,,! $
;,,$ %
set,,& )
;,,) *
},,+ ,
public-- 
int-- 
?-- 

IDPaciente-- 
{--  
get--! $
;--$ %
set--& )
;--) *
}--+ ,
public.. 
int.. 
?.. 
IDDoctor.. 
{.. 
get.. "
;.." #
set..$ '
;..' (
}..) *
}// 
public11 

class11 
Procedimientos11 
{22 
[33 	
Key33	 
]33 
public44 
required44 
int44 
IDProcedimiento44 +
{44, -
get44. 1
;441 2
set443 6
;446 7
}448 9
public55 
string55 
?55 
Descripcion55 "
{55# $
get55% (
;55( )
set55* -
;55- .
}55/ 0
[66 	
JsonRequired66	 
]66 
public66 
decimal66 %
Costo66& +
{66, -
get66. 1
;661 2
set663 6
;666 7
}668 9
public77 
int77 
?77 
IDCita77 
{77 
get77  
;77  !
set77" %
;77% &
}77' (
}88 
}99 